{"version":3,"file":"vue.js","sources":["../src/compiler/index.js","../src/util.js","../src/observer/array.js","../src/observer/index.js","../src/state.js","../src/init.js","../src/index.js"],"sourcesContent":["// 标签名\nvar ncname = \"[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*\";\n// 获取标签名 match后的索引为1的\nvar qnameCapture = \"((?:\" + ncname + \"\\\\:)?\" + ncname + \")\";\n// 匹配开始标签\nvar startTagOpen = new RegExp((\"^<\" + qnameCapture));\n// 匹配标签的关闭 <div/>\nvar startTagClose = /^\\s*(\\/?)>/;\n// 匹配闭合标签\nvar endTag = new RegExp((\"^<\\\\/\" + qnameCapture + \"[^>]*>\"));\n// 匹配属性 aa = \"xxx\" | 'xxx' | xxx  a=b a=\"b\" a ='b'\nvar attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/;\n// 匹配大括号 {{}}\nvar defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;\n\n//将解析后的结果 组装成一个树结构 ast树 栈\n\nfunction createAstElement(tagName, attrs) {\n  return {\n    tag: tagName,\n    type: 1,\n    children: [],\n    parent: null,\n    attrs\n  }\n} \n\nlet root = null\nlet stack = []\nfunction start (tagName, attributes) {\n  let parent = stack[stack.length - 1]\n  let element = createAstElement(tagName, attributes)\n  if (!root) {\n    root = element\n  }\n  element.parent = parent //当放入栈中时,记录父亲是谁\n  if (parent) {\n    element.children.push(element)\n  }\n  stack.push(element)\n}\n\nfunction end (tagName) {\n  console.log(tagName, 'end')\n  let last = stack.pop()\n  if (last.tag !== tagName) {\n    throw new Error('标签有误')\n  }\n}\n\nfunction chars(text) {\n  text = text.replace(/\\s/g, \"\")\n  let parent = stack[stack.length - 1]\n  if (text) {\n    parent.children.push({\n      type: 3,\n      text\n    })\n  }\n\n}\n\n// html字符串解析成dom树 解析成对应的脚本  <div id = 'app'> {{name}} </div>\n\nfunction parserHTML(html) { // <div id=\"app\">111</div>\n  \n\n  function advance(len){\n    html = html.substring(len)\n  }\n\n  function parseStartTag() {\n    const start = html.match(startTagOpen)\n    if(start){\n      const match = {\n        tagName: start[1],\n        attrs: []\n      }\n      // 去掉匹配到的开始标签\n      advance(start[0].length)\n      let end\n      // 如果没有遇到标签结尾就不停的解析\n      let attr\n      while (!(end  = html.match(startTagClose)) && (attr = html.match(attribute))) {\n        match.attrs.push({name: attr[1], value:attr[3] || attr[4] || attr[5]})\n        advance(attr[0].length)\n      } \n      if (end) {\n        advance(end[0].length)\n      } \n      return match\n    }\n    return false // 不是开始标签\n  }\n\n  while (html) { // 看解析的内容是否存在，如果存在就不停的解析\n    let textEnd = html.indexOf('<') // 当前解析的开头\n    if (textEnd == 0) {\n\n      const startTagMatch = parseStartTag() // 解析开始标签\n      if (startTagMatch) {\n        start(startTagMatch.tagName, startTagMatch.attrs)\n        continue\n      }\n\n      const endTagMatch = html.match(endTag)\n      if(endTagMatch) {\n        end(endTagMatch[1])\n        advance(endTagMatch[0].length)\n        continue\n      }\n    }\n    let text // 123123</div>\n    if(textEnd > 0) {\n      text = html.substring(0, textEnd)\n    }\n    if(text) {\n      chars(text)\n      advance(text.length)\n    }\n  }\n}\n\nexport function compileToFunction(template) {\n  \n  parserHTML(template)\n  console.log(root)\n}","export function isFunction (val) {\n  return typeof val === 'function'\n}\n\nexport function isObject(val) {\n  return typeof val === 'object' && val !== null\n}","let oldArrayPrototype = Array.prototype\n// 继承数组方法\nexport let arrayMethods = Object.create(oldArrayPrototype)\n// arrayMethods.__proto__ = Array.prototype \n\n//只有这7个可以改变原数组\nlet methods = [\n  'push',\n  'shift',\n  'unshift',\n  'pop',\n  'reverse',\n  'sort',\n  'splice'\n]\n\nmethods.forEach(method => {\n  // 用户调用的如果是以上七个方法,会用重写的,负责调用原来的数组方法\n  arrayMethods[method] = function (...args) {\n    // 此处this是数组\n    oldArrayPrototypep[method].call(this, ...args)\n    let inserted\n    let ob = this.__ob__//根据当前数组获取observe实例\n    switch(method){\n      case 'push':\n      case 'unshift':\n        inserted = args // 就是新增的内容\n        break\n      case 'splice':\n        inserted = args.slice(2)\n        break\n      default: \n        break\n    }\n    // 如果有新增的内容要继续劫持 需要观测数组每一项,而不是数组\n    if(inserted) ob.observeArray(inserted)\n\n    // arr.push({a:1}, {b:2})\n    // arr.splice(0, 1, xxxx)\n  }\n})","import { isObject } from \"../util\";\nimport { arrayMethods } from \"./array\";\n\n// 1.如果数据是对象 会将对象不停的递归 进行劫持\n// 2.如果是数组, 会劫持数组的方法 并对数组中不是基本数据类型的进行检测\n\n//检测数据变化，类有类型,对象无类型\nclass Observer{\n  constructor(data) {//对对象中的所有属性进行劫持\n    Object.defineProperty(data, '__ob__', {\n      value: this,\n      enumerable: false //不可枚举\n    })\n    // data.__ob__ = this //所有被劫持过的属性都有__ob__\n    if(Array.isArray(data)) {\n      //数组劫持，对数组原来方法改写,切片编程\n      data.__proto__  = arrayMethods\n      //如果数组中的数据是对象类型,需要监控对象的变化\n      this.observeArray(data)\n    }else {\n      this.walk(data) //对象劫持\n    }\n  }\n\n  observeArray(data) { //对数组中的数组和数组中的对象再次劫持\n    data.forEach(item => {\n      observe(item)\n    })\n  }\n\n  walk(data) {//传入的对象\n    Object.keys(data).forEach(key => {\n      defineReactive(data, key, data[key])\n    })\n  }\n}\n\n//vue2会对对象进行遍历,将每个属性用defineProperty重新定义,所以导致性能差\nfunction defineReactive(data, key, value){//value有可能是对象\n  observe (value)//本身用户默认值是对象套对象,需要递归处理（性能差）\n  Object.defineProperty(data, key,{\n    get() {\n      return value\n    },\n    set(newV) {\n      observe (newV)// 如果用户赋值一个新对象,需要将这个对象进行劫持\n      value = newV\n    }\n  })\n}\n\nexport function observe (data) {\n  //如果是对象类型才观测\n  if(!isObject(data)) {\n    return\n  }\n  //判断data有没有被观测\n  if(data.__ob__) {\n    return\n  }\n  return new Observer(data)\n}","import { observe } from \"./observer/index\"\nimport { isFunction } from \"./util\"\n\n// 状态初始化\nexport function initState(vm) {\n  const opts = vm.$options\n  // if (opts.props) {\n  //   initProps()\n  // }\n  if (opts.data) {\n    initData(vm)\n  }\n  // if (opts.computed) {\n  //   initComputed()\n  // }\n  // if (opts.watch) {\n  //   initWatch()\n  // }\n}\n\n// 代理\nfunction proxy(vm, source, key) {\n  Object.defineProperty(vm, key, {\n    get() {\n      return vm[source][key]\n    },\n    set(newVal) {\n      vm[source][key] = newVal\n    }\n  })\n}\n\nfunction initData(vm) {\n  let data = vm.$options.data // vm.$el vue内部会对属性检测如果以$开头 不会进行代理\n  // vue2会将data中的所有数据进行劫持 Object.defineProperty\n  //这个时候data和vm没有任何关系,通过_data进行关联\n  data = vm._data =isFunction(data)?data.call(vm): data\n\n  for(let key in data) { //取name时直接可以写vm.name vm.xxx => vm._data.xxx\n    proxy(vm, '_data', key)\n  }\n  \n  observe(data)\n}","import { compileToFunction } from \"./compiler/index\"\nimport { initState } from \"./state\"\n\nexport function initMixin(Vue) { //表示在vue的基础上做一次混合操作\n  Vue.prototype._init = function (options) {\n    const vm = this\n    vm.$options = options//后面会对options进行扩展\n\n    // 对数据进行初始化\n    initState(vm)//vm.$options.data 数据劫持\n\n    \n    if(vm.$options.el) {\n      // 将数据挂载到这个模板上\n      vm.$mount(vm.$options.el)\n    }\n  }\n\n  Vue.prototype.$mount = function (el) {\n    const vm = this\n    const options = vm.$options\n    el = document.querySelector(el)\n    console.log(el ,'el')\n\n    // 把模版转换成 对应的渲染函数 =》 虚拟dom vnode diff算法 更新虚拟dom => 真实dom\n\n    if(!options.render) { // 没有render用template\n      let template = options.template\n      if(!template && el) {// 没有template就取el的内容作为模板\n        template = el.outerHTML\n        let render = compileToFunction(template)\n        options.render = render\n      }\n    }\n    // options.render就是渲染函数\n  }\n\n}\n\n","//用class类写vue不好拆封,所以采用构造函数方式写\n\nimport { initMixin } from './init'\n\nfunction Vue(options) {\n  // options用户传入选项\n  //构造函数中的this指向new的实例\n  this._init(options)// 初始化操作\n}\n// 扩展原型\ninitMixin(Vue)\n\nexport default Vue"],"names":["ncname","qnameCapture","startTagOpen","RegExp","startTagClose","endTag","attribute","createAstElement","tagName","attrs","tag","type","children","parent","root","stack","start","attributes","length","element","push","end","console","log","last","pop","Error","chars","text","replace","parserHTML","html","advance","len","substring","parseStartTag","match","attr","name","value","textEnd","indexOf","startTagMatch","endTagMatch","compileToFunction","template","isFunction","val","isObject","oldArrayPrototype","Array","prototype","arrayMethods","Object","create","methods","forEach","method","args","oldArrayPrototypep","call","inserted","ob","__ob__","slice","observeArray","Observer","data","defineProperty","enumerable","isArray","__proto__","walk","item","observe","keys","key","defineReactive","get","set","newV","initState","vm","opts","$options","initData","proxy","source","newVal","_data","initMixin","Vue","_init","options","el","$mount","document","querySelector","render","outerHTML"],"mappings":";;;;;;EAAA;EACA,IAAIA,MAAM,GAAG,8BAAb;;EAEA,IAAIC,YAAY,GAAG,SAASD,MAAT,GAAkB,OAAlB,GAA4BA,MAA5B,GAAqC,GAAxD;;EAEA,IAAIE,YAAY,GAAG,IAAIC,MAAJ,CAAY,OAAOF,YAAnB,CAAnB;;EAEA,IAAIG,aAAa,GAAG,YAApB;;EAEA,IAAIC,MAAM,GAAG,IAAIF,MAAJ,CAAY,UAAUF,YAAV,GAAyB,QAArC,CAAb;;EAEA,IAAIK,SAAS,GAAG,2EAAhB;;EAMA,SAASC,gBAAT,CAA0BC,OAA1B,EAAmCC,KAAnC,EAA0C;EACxC,SAAO;EACLC,IAAAA,GAAG,EAAEF,OADA;EAELG,IAAAA,IAAI,EAAE,CAFD;EAGLC,IAAAA,QAAQ,EAAE,EAHL;EAILC,IAAAA,MAAM,EAAE,IAJH;EAKLJ,IAAAA,KAAK,EAALA;EALK,GAAP;EAOD;;EAED,IAAIK,IAAI,GAAG,IAAX;EACA,IAAIC,KAAK,GAAG,EAAZ;;EACA,SAASC,KAAT,CAAgBR,OAAhB,EAAyBS,UAAzB,EAAqC;EACnC,MAAIJ,MAAM,GAAGE,KAAK,CAACA,KAAK,CAACG,MAAN,GAAe,CAAhB,CAAlB;EACA,MAAIC,OAAO,GAAGZ,gBAAgB,CAACC,OAAD,EAAUS,UAAV,CAA9B;;EACA,MAAI,CAACH,IAAL,EAAW;EACTA,IAAAA,IAAI,GAAGK,OAAP;EACD;;EACDA,EAAAA,OAAO,CAACN,MAAR,GAAiBA,MAAjB,CANmC;;EAOnC,MAAIA,MAAJ,EAAY;EACVM,IAAAA,OAAO,CAACP,QAAR,CAAiBQ,IAAjB,CAAsBD,OAAtB;EACD;;EACDJ,EAAAA,KAAK,CAACK,IAAN,CAAWD,OAAX;EACD;;EAED,SAASE,GAAT,CAAcb,OAAd,EAAuB;EACrBc,EAAAA,OAAO,CAACC,GAAR,CAAYf,OAAZ,EAAqB,KAArB;EACA,MAAIgB,IAAI,GAAGT,KAAK,CAACU,GAAN,EAAX;;EACA,MAAID,IAAI,CAACd,GAAL,KAAaF,OAAjB,EAA0B;EACxB,UAAM,IAAIkB,KAAJ,CAAU,MAAV,CAAN;EACD;EACF;;EAED,SAASC,KAAT,CAAeC,IAAf,EAAqB;EACnBA,EAAAA,IAAI,GAAGA,IAAI,CAACC,OAAL,CAAa,KAAb,EAAoB,EAApB,CAAP;EACA,MAAIhB,MAAM,GAAGE,KAAK,CAACA,KAAK,CAACG,MAAN,GAAe,CAAhB,CAAlB;;EACA,MAAIU,IAAJ,EAAU;EACRf,IAAAA,MAAM,CAACD,QAAP,CAAgBQ,IAAhB,CAAqB;EACnBT,MAAAA,IAAI,EAAE,CADa;EAEnBiB,MAAAA,IAAI,EAAJA;EAFmB,KAArB;EAID;EAEF;;;EAID,SAASE,UAAT,CAAoBC,IAApB,EAA0B;EAAE;EAG1B,WAASC,OAAT,CAAiBC,GAAjB,EAAqB;EACnBF,IAAAA,IAAI,GAAGA,IAAI,CAACG,SAAL,CAAeD,GAAf,CAAP;EACD;;EAED,WAASE,aAAT,GAAyB;EACvB,QAAMnB,KAAK,GAAGe,IAAI,CAACK,KAAL,CAAWlC,YAAX,CAAd;;EACA,QAAGc,KAAH,EAAS;EACP,UAAMoB,KAAK,GAAG;EACZ5B,QAAAA,OAAO,EAAEQ,KAAK,CAAC,CAAD,CADF;EAEZP,QAAAA,KAAK,EAAE;EAFK,OAAd,CADO;;EAMPuB,MAAAA,OAAO,CAAChB,KAAK,CAAC,CAAD,CAAL,CAASE,MAAV,CAAP;;EACA,UAAIG,IAAJ,CAPO;;;EASP,UAAIgB,IAAJ;;EACA,aAAO,EAAEhB,IAAG,GAAIU,IAAI,CAACK,KAAL,CAAWhC,aAAX,CAAT,MAAwCiC,IAAI,GAAGN,IAAI,CAACK,KAAL,CAAW9B,SAAX,CAA/C,CAAP,EAA8E;EAC5E8B,QAAAA,KAAK,CAAC3B,KAAN,CAAYW,IAAZ,CAAiB;EAACkB,UAAAA,IAAI,EAAED,IAAI,CAAC,CAAD,CAAX;EAAgBE,UAAAA,KAAK,EAACF,IAAI,CAAC,CAAD,CAAJ,IAAWA,IAAI,CAAC,CAAD,CAAf,IAAsBA,IAAI,CAAC,CAAD;EAAhD,SAAjB;EACAL,QAAAA,OAAO,CAACK,IAAI,CAAC,CAAD,CAAJ,CAAQnB,MAAT,CAAP;EACD;;EACD,UAAIG,IAAJ,EAAS;EACPW,QAAAA,OAAO,CAACX,IAAG,CAAC,CAAD,CAAH,CAAOH,MAAR,CAAP;EACD;;EACD,aAAOkB,KAAP;EACD;;EACD,WAAO,KAAP,CArBuB;EAsBxB;;EAED,SAAOL,IAAP,EAAa;EAAE;EACb,QAAIS,OAAO,GAAGT,IAAI,CAACU,OAAL,CAAa,GAAb,CAAd,CADW;;EAEX,QAAID,OAAO,IAAI,CAAf,EAAkB;EAEhB,UAAME,aAAa,GAAGP,aAAa,EAAnC,CAFgB;;EAGhB,UAAIO,aAAJ,EAAmB;EACjB1B,QAAAA,KAAK,CAAC0B,aAAa,CAAClC,OAAf,EAAwBkC,aAAa,CAACjC,KAAtC,CAAL;EACA;EACD;;EAED,UAAMkC,WAAW,GAAGZ,IAAI,CAACK,KAAL,CAAW/B,MAAX,CAApB;;EACA,UAAGsC,WAAH,EAAgB;EACdtB,QAAAA,GAAG,CAACsB,WAAW,CAAC,CAAD,CAAZ,CAAH;EACAX,QAAAA,OAAO,CAACW,WAAW,CAAC,CAAD,CAAX,CAAezB,MAAhB,CAAP;EACA;EACD;EACF;;EACD,QAAIU,IAAI,SAAR,CAjBW;;EAkBX,QAAGY,OAAO,GAAG,CAAb,EAAgB;EACdZ,MAAAA,IAAI,GAAGG,IAAI,CAACG,SAAL,CAAe,CAAf,EAAkBM,OAAlB,CAAP;EACD;;EACD,QAAGZ,IAAH,EAAS;EACPD,MAAAA,KAAK,CAACC,IAAD,CAAL;EACAI,MAAAA,OAAO,CAACJ,IAAI,CAACV,MAAN,CAAP;EACD;EACF;EACF;;EAEM,SAAS0B,iBAAT,CAA2BC,QAA3B,EAAqC;EAE1Cf,EAAAA,UAAU,CAACe,QAAD,CAAV;EACAvB,EAAAA,OAAO,CAACC,GAAR,CAAYT,IAAZ;EACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EC/HM,SAASgC,UAAT,CAAqBC,GAArB,EAA0B;EAC/B,SAAO,OAAOA,GAAP,KAAe,UAAtB;EACD;EAEM,SAASC,QAAT,CAAkBD,GAAlB,EAAuB;EAC5B,SAAO,QAAOA,GAAP,MAAe,QAAf,IAA2BA,GAAG,KAAK,IAA1C;EACD;;ECND,IAAIE,iBAAiB,GAAGC,KAAK,CAACC,SAA9B;;EAEO,IAAIC,YAAY,GAAGC,MAAM,CAACC,MAAP,CAAcL,iBAAd,CAAnB;EAGP;;EACA,IAAIM,OAAO,GAAG,CACZ,MADY,EAEZ,OAFY,EAGZ,SAHY,EAIZ,KAJY,EAKZ,SALY,EAMZ,MANY,EAOZ,QAPY,CAAd;EAUAA,OAAO,CAACC,OAAR,CAAgB,UAAAC,MAAM,EAAI;EACxB;EACAL,EAAAA,YAAY,CAACK,MAAD,CAAZ,GAAuB,YAAmB;EAAA;;EAAA,sCAANC,IAAM;EAANA,MAAAA,IAAM;EAAA;;EACxC;EACA,6BAAAC,kBAAkB,CAACF,MAAD,CAAlB,EAA2BG,IAA3B,+BAAgC,IAAhC,SAAyCF,IAAzC;;EACA,QAAIG,QAAJ;EACA,QAAIC,EAAE,GAAG,KAAKC,MAAd,CAJwC;;EAKxC,YAAON,MAAP;EACE,WAAK,MAAL;EACA,WAAK,SAAL;EACEI,QAAAA,QAAQ,GAAGH,IAAX,CADF;;EAEE;;EACF,WAAK,QAAL;EACEG,QAAAA,QAAQ,GAAGH,IAAI,CAACM,KAAL,CAAW,CAAX,CAAX;EACA;EAPJ,KALwC;;;EAiBxC,QAAGH,QAAH,EAAaC,EAAE,CAACG,YAAH,CAAgBJ,QAAhB,EAjB2B;EAoBxC;EACD,GArBD;EAsBD,CAxBD;;ECZA;EAEA;;MACMK;EACJ,oBAAYC,IAAZ,EAAkB;EAAA;;EAAC;EACjBd,IAAAA,MAAM,CAACe,cAAP,CAAsBD,IAAtB,EAA4B,QAA5B,EAAsC;EACpC5B,MAAAA,KAAK,EAAE,IAD6B;EAEpC8B,MAAAA,UAAU,EAAE,KAFwB;;EAAA,KAAtC,EADgB;;EAMhB,QAAGnB,KAAK,CAACoB,OAAN,CAAcH,IAAd,CAAH,EAAwB;EACtB;EACAA,MAAAA,IAAI,CAACI,SAAL,GAAkBnB,YAAlB,CAFsB;;EAItB,WAAKa,YAAL,CAAkBE,IAAlB;EACD,KALD,MAKM;EACJ,WAAKK,IAAL,CAAUL,IAAV,EADI;EAEL;EACF;;;;aAED,sBAAaA,IAAb,EAAmB;EAAE;EACnBA,MAAAA,IAAI,CAACX,OAAL,CAAa,UAAAiB,IAAI,EAAI;EACnBC,QAAAA,OAAO,CAACD,IAAD,CAAP;EACD,OAFD;EAGD;;;aAED,cAAKN,IAAL,EAAW;EAAC;EACVd,MAAAA,MAAM,CAACsB,IAAP,CAAYR,IAAZ,EAAkBX,OAAlB,CAA0B,UAAAoB,GAAG,EAAI;EAC/BC,QAAAA,cAAc,CAACV,IAAD,EAAOS,GAAP,EAAYT,IAAI,CAACS,GAAD,CAAhB,CAAd;EACD,OAFD;EAGD;;;;;;;EAIH,SAASC,cAAT,CAAwBV,IAAxB,EAA8BS,GAA9B,EAAmCrC,KAAnC,EAAyC;EAAC;EACxCmC,EAAAA,OAAO,CAAEnC,KAAF,CAAP,CADuC;;EAEvCc,EAAAA,MAAM,CAACe,cAAP,CAAsBD,IAAtB,EAA4BS,GAA5B,EAAgC;EAC9BE,IAAAA,GAD8B,iBACxB;EACJ,aAAOvC,KAAP;EACD,KAH6B;EAI9BwC,IAAAA,GAJ8B,eAI1BC,IAJ0B,EAIpB;EACRN,MAAAA,OAAO,CAAEM,IAAF,CAAP,CADQ;;EAERzC,MAAAA,KAAK,GAAGyC,IAAR;EACD;EAP6B,GAAhC;EASD;;EAEM,SAASN,OAAT,CAAkBP,IAAlB,EAAwB;EAC7B;EACA,MAAG,CAACnB,QAAQ,CAACmB,IAAD,CAAZ,EAAoB;EAClB;EACD,GAJ4B;;;EAM7B,MAAGA,IAAI,CAACJ,MAAR,EAAgB;EACd;EACD;;EACD,SAAO,IAAIG,QAAJ,CAAaC,IAAb,CAAP;EACD;;ECzDM,SAASc,SAAT,CAAmBC,EAAnB,EAAuB;EAC5B,MAAMC,IAAI,GAAGD,EAAE,CAACE,QAAhB,CAD4B;EAG5B;EACA;;EACA,MAAID,IAAI,CAAChB,IAAT,EAAe;EACbkB,IAAAA,QAAQ,CAACH,EAAD,CAAR;EACD,GAP2B;EAS5B;EACA;EACA;EACA;EACA;;EACD;;EAGD,SAASI,KAAT,CAAeJ,EAAf,EAAmBK,MAAnB,EAA2BX,GAA3B,EAAgC;EAC9BvB,EAAAA,MAAM,CAACe,cAAP,CAAsBc,EAAtB,EAA0BN,GAA1B,EAA+B;EAC7BE,IAAAA,GAD6B,iBACvB;EACJ,aAAOI,EAAE,CAACK,MAAD,CAAF,CAAWX,GAAX,CAAP;EACD,KAH4B;EAI7BG,IAAAA,GAJ6B,eAIzBS,MAJyB,EAIjB;EACVN,MAAAA,EAAE,CAACK,MAAD,CAAF,CAAWX,GAAX,IAAkBY,MAAlB;EACD;EAN4B,GAA/B;EAQD;;EAED,SAASH,QAAT,CAAkBH,EAAlB,EAAsB;EACpB,MAAIf,IAAI,GAAGe,EAAE,CAACE,QAAH,CAAYjB,IAAvB,CADoB;EAEpB;EACA;;EACAA,EAAAA,IAAI,GAAGe,EAAE,CAACO,KAAH,GAAU3C,UAAU,CAACqB,IAAD,CAAV,GAAiBA,IAAI,CAACP,IAAL,CAAUsB,EAAV,CAAjB,GAAgCf,IAAjD;;EAEA,OAAI,IAAIS,GAAR,IAAeT,IAAf,EAAqB;EAAE;EACrBmB,IAAAA,KAAK,CAACJ,EAAD,EAAK,OAAL,EAAcN,GAAd,CAAL;EACD;;EAEDF,EAAAA,OAAO,CAACP,IAAD,CAAP;EACD;;ECxCM,SAASuB,SAAT,CAAmBC,GAAnB,EAAwB;EAAE;EAC/BA,EAAAA,GAAG,CAACxC,SAAJ,CAAcyC,KAAd,GAAsB,UAAUC,OAAV,EAAmB;EACvC,QAAMX,EAAE,GAAG,IAAX;EACAA,IAAAA,EAAE,CAACE,QAAH,GAAcS,OAAd,CAFuC;EAIvC;;EACAZ,IAAAA,SAAS,CAACC,EAAD,CAAT,CALuC;;EAQvC,QAAGA,EAAE,CAACE,QAAH,CAAYU,EAAf,EAAmB;EACjB;EACAZ,MAAAA,EAAE,CAACa,MAAH,CAAUb,EAAE,CAACE,QAAH,CAAYU,EAAtB;EACD;EACF,GAZD;;EAcAH,EAAAA,GAAG,CAACxC,SAAJ,CAAc4C,MAAd,GAAuB,UAAUD,EAAV,EAAc;EACnC,QAAMZ,EAAE,GAAG,IAAX;EACA,QAAMW,OAAO,GAAGX,EAAE,CAACE,QAAnB;EACAU,IAAAA,EAAE,GAAGE,QAAQ,CAACC,aAAT,CAAuBH,EAAvB,CAAL;EACAxE,IAAAA,OAAO,CAACC,GAAR,CAAYuE,EAAZ,EAAgB,IAAhB,EAJmC;;EAQnC,QAAG,CAACD,OAAO,CAACK,MAAZ,EAAoB;EAAE;EACpB,UAAIrD,QAAQ,GAAGgD,OAAO,CAAChD,QAAvB;;EACA,UAAG,CAACA,QAAD,IAAaiD,EAAhB,EAAoB;EAAC;EACnBjD,QAAAA,QAAQ,GAAGiD,EAAE,CAACK,SAAd;EACA,YAAID,MAAM,GAAGtD,iBAAiB,CAACC,QAAD,CAA9B;EACAgD,QAAAA,OAAO,CAACK,MAAR,GAAiBA,MAAjB;EACD;EACF,KAfkC;;EAiBpC,GAjBD;EAmBD;;ECrCD;;EAIA,SAASP,GAAT,CAAaE,OAAb,EAAsB;EACpB;EACA;EACA,OAAKD,KAAL,CAAWC,OAAX,EAHoB;;EAIrB;;;EAEDH,SAAS,CAACC,GAAD,CAAT;;;;;;;;"}