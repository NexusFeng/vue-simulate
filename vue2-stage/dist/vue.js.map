{"version":3,"file":"vue.js","sources":["../src/util.js","../src/observer/index.js","../src/state.js","../src/init.js","../src/index.js"],"sourcesContent":["export function isFunction (val) {\n  return typeof val === 'function'\n}\n\nexport function isObject(val) {\n  return typeof val === 'object' && val !== null\n}","import { isObject } from \"../util\";\n\n//检测数据变化，类有类型,对象无类型\nclass Observer{\n  constructor(data) {//对对象中的所有属性进行劫持\n    this.walk(data)\n  }\n  walk(data) {//传入的对象\n    Object.keys(data).forEach(key => {\n      defineReactive(data, key, data[key])\n    })\n  }\n}\n\n//vue2会对对象进行遍历,将每个属性用defineProperty重新定义,所以导致性能差\nfunction defineReactive(data, key, value){//value有可能是对象\n  observe (data)//本身用户默认值是对象套对象,需要递归处理（性能差）\n  Object.defineProperty(data, key,{\n    get() {\n      return value\n    },\n    set(newV) {\n      observe (newV)// 如果用户赋值一个新对象,需要将这个对象进行劫持\n      value = newV\n    }\n  })\n}\n\nexport function observe (data) {\n  //如果是对象才观测\n  if(!isObject(data)) {\n    return\n  }\n  return new Observer(data)\n}","import { observe } from \"./observer/index\"\nimport { isFunction } from \"./util\"\n\n// 状态初始化\nexport function initState(vm) {\n  const opts = vm.$options\n  // if (opts.props) {\n  //   initProps()\n  // }\n  if (opts.data) {\n    initData(vm)\n  }\n  // if (opts.computed) {\n  //   initComputed()\n  // }\n  // if (opts.watch) {\n  //   initWatch()\n  // }\n}\n\nfunction initData() {\n  let data = vm.$options.data\n  // vue2会将data中的所有数据进行劫持 Object.defineProperty\n  //这个时候data和vm没有任何关系,通过_data进行关联\n  data = vm._data =isFunction(data)?data.call(vm): data\n\n  observe(data)\n}","import { initState } from \"./state\"\n\nexport function initMixin(Vue) { //表示在vue的基础上做一次混合操作\n  Vue.prototype._init = function (options) {\n    const vm = this\n    vm.$options = options//后面会对options进行扩展\n\n    // 对数据进行初始化\n    initState(vm)//vm.$options.data\n  }\n}\n\n","//用class类写vue不好拆封,所以采用构造函数方式写\n\nimport { initMixin } from './init'\n\nfunction Vue(options) {\n  // options用户传入选项\n  //构造函数中的this指向new的实例\n  this._init(options)// 初始化操作\n}\n// 扩展原型\ninitMixin(Vue)\n\nexport default Vue"],"names":["isFunction","val","isObject","Observer","data","walk","Object","keys","forEach","key","defineReactive","value","observe","defineProperty","get","set","newV","initState","vm","opts","$options","initData","_data","call","initMixin","Vue","prototype","_init","options"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAAO,SAASA,UAAT,CAAqBC,GAArB,EAA0B;EAC/B,SAAO,OAAOA,GAAP,KAAe,UAAtB;EACD;EAEM,SAASC,QAAT,CAAkBD,GAAlB,EAAuB;EAC5B,SAAO,QAAOA,GAAP,MAAe,QAAf,IAA2BA,GAAG,KAAK,IAA1C;EACD;;MCHKE;EACJ,oBAAYC,IAAZ,EAAkB;EAAA;;EAAC;EACjB,SAAKC,IAAL,CAAUD,IAAV;EACD;;;;aACD,cAAKA,IAAL,EAAW;EAAC;EACVE,MAAAA,MAAM,CAACC,IAAP,CAAYH,IAAZ,EAAkBI,OAAlB,CAA0B,UAAAC,GAAG,EAAI;EAC/BC,QAAAA,cAAc,CAACN,IAAD,EAAOK,GAAP,EAAYL,IAAI,CAACK,GAAD,CAAhB,CAAd;EACD,OAFD;EAGD;;;;;;;EAIH,SAASC,cAAT,CAAwBN,IAAxB,EAA8BK,GAA9B,EAAmCE,KAAnC,EAAyC;EAAC;EACxCC,EAAAA,OAAO,CAAER,IAAF,CAAP,CADuC;;EAEvCE,EAAAA,MAAM,CAACO,cAAP,CAAsBT,IAAtB,EAA4BK,GAA5B,EAAgC;EAC9BK,IAAAA,GAD8B,iBACxB;EACJ,aAAOH,KAAP;EACD,KAH6B;EAI9BI,IAAAA,GAJ8B,eAI1BC,IAJ0B,EAIpB;EACRJ,MAAAA,OAAO,CAAEI,IAAF,CAAP,CADQ;;EAERL,MAAAA,KAAK,GAAGK,IAAR;EACD;EAP6B,GAAhC;EASD;;EAEM,SAASJ,OAAT,CAAkBR,IAAlB,EAAwB;EAC7B;EACA,MAAG,CAACF,QAAQ,CAACE,IAAD,CAAZ,EAAoB;EAClB;EACD;;EACD,SAAO,IAAID,QAAJ,CAAaC,IAAb,CAAP;EACD;;EC9BM,SAASa,SAAT,CAAmBC,EAAnB,EAAuB;EAC5B,MAAMC,IAAI,GAAGD,EAAE,CAACE,QAAhB,CAD4B;EAG5B;EACA;;EACA,MAAID,IAAI,CAACf,IAAT,EAAe;EACbiB,IAAAA,QAAQ,CAAA,CAAR;EACD,GAP2B;EAS5B;EACA;EACA;EACA;EACA;;EACD;;EAED,SAASA,QAAT,GAAoB;EAClB,MAAIjB,IAAI,GAAGc,EAAE,CAACE,QAAH,CAAYhB,IAAvB,CADkB;EAGlB;;EACAA,EAAAA,IAAI,GAAGc,EAAE,CAACI,KAAH,GAAUtB,UAAU,CAACI,IAAD,CAAV,GAAiBA,IAAI,CAACmB,IAAL,CAAUL,EAAV,CAAjB,GAAgCd,IAAjD;EAEAQ,EAAAA,OAAO,CAACR,IAAD,CAAP;EACD;;ECzBM,SAASoB,SAAT,CAAmBC,GAAnB,EAAwB;EAAE;EAC/BA,EAAAA,GAAG,CAACC,SAAJ,CAAcC,KAAd,GAAsB,UAAUC,OAAV,EAAmB;EACvC,QAAMV,EAAE,GAAG,IAAX;EACAA,IAAAA,EAAE,CAACE,QAAH,GAAcQ,OAAd,CAFuC;EAIvC;;EACAX,IAAAA,SAAS,CAACC,EAAD,CAAT,CALuC;EAMxC,GAND;EAOD;;ECVD;;EAIA,SAASO,GAAT,CAAaG,OAAb,EAAsB;EACpB;EACA;EACA,OAAKD,KAAL,CAAWC,OAAX,EAHoB;;EAIrB;;;EAEDJ,SAAS,CAACC,GAAD,CAAT;;;;;;;;"}