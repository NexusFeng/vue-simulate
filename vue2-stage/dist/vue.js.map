{"version":3,"file":"vue.js","sources":["../src/util.js","../src/alobal-api/index.js","../src/compiler/generate.js","../src/compiler/parser.js","../src/compiler/index.js","../src/observer/dep.js","../src/observer/scheduler.js","../src/observer/watcher.js","../src/vdom/patch.js","../src/lifecycle.js","../src/observer/array.js","../src/observer/index.js","../src/state.js","../src/init.js","../src/vdom/index.js","../src/render.js","../src/index.js"],"sourcesContent":["export function isFunction (val) {\n  return typeof val === 'function'\n}\n\nexport function isObject(val) {\n  return typeof val === 'object' && val !== null\n}\n\nconst callbacks = []\nfunction flushCallbacks() {\n  callbacks.forEach(cb => cb())\n  waiting = false\n}\n\nlet waiting = false\nfunction timer(flushCallbacks) {\n  let timerFn = () => {}\n\n  if(Promise) {\n    timerFn = () => {\n      Promise.resolve().then(flushCallbacks)\n    }\n  } else if(MutationObserver){\n    let textNode = document.createTextNode(1)\n    let observe = new MutationObserver(flushCallbacks)\n    observe.observe(textNode, {\n      characterData: true\n    })\n\n    timerFn = () => {\n      textNode.textContent = 3\n    }\n\n    // 微任务\n  } else if (setImmedidate) {\n    timerFn = () => {\n      setImmedidate(flushCallbacks)\n    }\n  } else {\n    timerFn = () => {\n      setTimeout(flushCallbacks)\n    }\n  }\n  timerFn()\n  \n\n}\n\n\n// 微任务是在页面渲染前执行,取得是内存中的dom，不关心是否渲染完\nexport function nextTick(cb) {\n  callbacks.push(cb) // flushSchedulerQueue先执行，用户的$nextTick后执行\n\n  if (!waiting) {\n    // Promise.resolve().then(flushCallbacks)//vue2考虑兼容性问题， vue3不考虑\n    // 处理兼容性\n    timer(flushCallbacks)\n    waiting = true\n  }\n}\n\nlet lifecycleHooks = [\n  'beforeCreate',\n  'created',\n  'beforeMount',\n  'mounted',\n  'beforeUpdate',\n  'updated',\n  'beforeDestroy',\n  'destroyed'\n]\n\n// 第一次调用                     {}         {beforeCreate: Fn} => {beforeCreate: [fn]}\n// 第二次调用        {beforeCreate: [fn]} {beforeCreate: Fn2} => {beforeCreate: [fn,fn2]}\nfunction mergeHook(parentVal, childVal) {\n  if(childVal) {\n    if(parentVal) {\n      return parentVal.concat(childVal)\n    }else {\n      return [childVal]\n    }\n  }else {\n    return parentVal\n  }\n}\n\nlet strats = {}//存放各种策略\nlifecycleHooks.forEach(hook => {\n  strats[hook] = mergeHook\n})\n\nstrats.data = function () {\n\n}\n\nstrats.components = function () {\n\n}\n\n\n\n\nexport function mergeOptions(parent, child) {\n  const options = {} //合并后的结果\n  for(let key in parent) {\n    mergeField(key)\n  }\n  for(let key in child) {\n    if(parent.hasOwnProperty(key)) {\n      continue\n    }\n    mergeField(key)\n  }\n\n  function mergeField(key) {\n    let parentVal = parent[key]\n    let childVal = child[key]\n    // 策略模式\n    if (strats[key]) {//如果有对应的策略就调用对应的策略即可\n      options[key] = strats[key](parentVal, childVal)\n    }else {\n      if(isObject(parentVal) && isObject(childVal)) {\n        options[key] = {...parentVal, ...childVal }\n      } else {\n        options[key] = child[key]\n      }\n    }\n  } \n\n  return options\n}","import { mergeOptions } from \"../util\"\n\nexport function initGlobalApi(Vue) {\n  // Vue.component\n  // Vue.filter\n  // Vue.directive\n  Vue.options = {} // 用来存放全局的配置,每个组件初始化时,都会和options选项进行合并\n  Vue.mixin = function (options) {\n    // 第一次调用                     {}         {beforeCreate: Fn} => {beforeCreate: [fn]}\n    // 第二次调用        {beforeCreate: [fn]} {beforeCreate: Fn2} => {beforeCreate: [fn,fn2]}\n    this.options = mergeOptions(this.options, options)\n    return this\n  }\n}","// 匹配大括号 {{}}\nvar defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;// {{aaaa}}\n\nfunction genProps(attrs) {// [{name: 'xxxx', value: 'hello'}]\n  let str = ''\n  for(let i = 0; i < attrs.length; i++) {\n    let attr = attrs[i]\n    if (attr.name === 'style') {//style=\"border: 1px;font-size: 18px;\"\n      let styleObj = {}\n      attr.value.replace(/([^;:]+)\\:([^;:]+)/g, function() {\n        styleObj[arguments[1]] = arguments[2]\n      })\n      attr.value = styleObj\n    }\n    str += `${attr.name}:${JSON.stringify(attr.value)},`\n  }\n  // a: 1, b:2, slice去掉最后的逗号\n  return `{${str.slice(0, -1)}}`\n}\n\nfunction gen(el) {\n  if(el.type == 1) {\n    return generate(el)\n  } else {\n    let text = el.text\n    if(!defaultTagRE.test(text)) {\n      return `_v(${text})`\n    } else {\n      // 'hello'+ arr + 'world'   hello {{arr}} world\n      let tokens = []\n      let match\n      let lastIndex = defaultTagRE.lastIndex = 0\n      while(match = defaultTagRE.exec(text)) {// 看有没有匹配到\n        let index = match.index; //开始索引\n        if (index > lastIndex) {\n          tokens.push(JSON.stringify(text.slice(lastIndex, index)))\n        }\n        tokens.push(`_s(${match[1].trim()})`) // JSON.stringify\n        lastIndex = index + match[0].length\n      }\n      if(lastIndex < text.length) {\n        tokens.push(JSON.stringify(text.slice(lastIndex)))\n      }\n\n      return `_v(${tokens.join('+')})`\n    }\n    \n  }\n}\n\nfunction genChildren(el) {\n  let children = el.children//获取儿子\n  if(children) {\n    return children.map(c=>gen(c)).join(',')\n  }\n}\n\nexport function generate(el) {// _c('div', {id: 'app'},_c('span', {}, 'world'), _v('hello'))\n  //遍历树,将树拼接成字符串\n  let children = genChildren(el)\n  let code = `_c('${el.tag}', ${\n      el.attrs.length? genProps(el.attrs) : 'undefined' \n    }${children? `,${children}`:'' \n  })`\n\n  return code\n}","// 标签名\nvar ncname = \"[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*\";\n// 获取标签名 match后的索引为1的\nvar qnameCapture = \"((?:\" + ncname + \"\\\\:)?\" + ncname + \")\";\n// 匹配开始标签\nvar startTagOpen = new RegExp((\"^<\" + qnameCapture));\n// 匹配标签的关闭 <div/>\nvar startTagClose = /^\\s*(\\/?)>/;\n// 匹配闭合标签\nvar endTag = new RegExp((\"^<\\\\/\" + qnameCapture + \"[^>]*>\"));\n// 匹配属性 aa = \"xxx\" | 'xxx' | xxx  a=b a=\"b\" a ='b'\nvar attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/;\n// 匹配大括号 {{}}\nvar defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;// {{aaaa}}\n\n//将解析后的结果 组装成一个树结构 ast树 栈\n\nfunction createAstElement(tagName, attrs) {\n  return {\n    tag: tagName,\n    type: 1,\n    children: [],\n    parent: null,\n    attrs\n  }\n} \n\nlet root = null\nlet stack = []\nfunction start (tagName, attributes) {\n  let parent = stack[stack.length - 1]\n  let element = createAstElement(tagName, attributes)\n  if (!root) {\n    root = element\n  }\n  \n  if (parent) {\n    element.parent = parent //当放入栈中时,记录父亲是谁\n    element.children.push(element)\n  }\n  stack.push(element)\n}\n\nfunction end (tagName) {\n  let last = stack.pop()\n  if (last.tag !== tagName) {\n    throw new Error('标签有误')\n  }\n}\n\nfunction chars(text) {\n  text = text.replace(/\\s/g, \"\")\n  let parent = stack[stack.length - 1]\n  if (text) {\n    parent.children.push({\n      type: 3,\n      text\n    })\n  }\n\n}\n\n// ast (语法层面的描述 js css html) vdom （dom节点）\n// html字符串解析成dom树 解析成对应的脚本  <div id = 'app'> {{name}} </div>\n\nexport function parserHTML(html) { // <div id=\"app\">111</div>\n  \n\n  function advance(len){\n    html = html.substring(len)\n  }\n\n  function parseStartTag() {\n    const start = html.match(startTagOpen)\n    if(start){\n      const match = {\n        tagName: start[1],\n        attrs: []\n      }\n      // 去掉匹配到的开始标签\n      advance(start[0].length)\n      let end\n      // 如果没有遇到标签结尾就不停的解析\n      let attr\n      while (!(end  = html.match(startTagClose)) && (attr = html.match(attribute))) {\n        match.attrs.push({name: attr[1], value: attr[3] || attr[4] || attr[5]})\n        advance(attr[0].length)\n      } \n      if (end) {\n        advance(end[0].length)\n      } \n      return match\n    }\n    return false // 不是开始标签\n  }\n\n  while (html) { // 看解析的内容是否存在，如果存在就不停的解析\n    let textEnd = html.indexOf('<') // 当前解析的开头\n    if (textEnd == 0) {\n\n      const startTagMatch = parseStartTag() // 解析开始标签\n      if (startTagMatch) {\n        start(startTagMatch.tagName, startTagMatch.attrs)\n        continue\n      }\n\n      const endTagMatch = html.match(endTag)\n      if(endTagMatch) {\n        end(endTagMatch[1])\n        advance(endTagMatch[0].length)\n        continue\n      }\n    }\n    let text // 123123</div>\n    if(textEnd > 0) {\n      text = html.substring(0, textEnd)\n    }\n    if(text) {\n      chars(text)\n      advance(text.length)\n    }\n  }\n  return root\n}\n\n// 看一下用户是否传入了render，没传入可能传入的事template，template如果也没传就解析\n// html => 词法解析（开始标签 ，结束标签， 属性， 文本） => ast语法树 用来描述html语法的 stack = []\n// codegen函数将<div>hello</div> => _c('div', {}, 'hello') => 让字符串执行\n// 字符串转为代码  eval 耗性能 会有作用域问题\n\n// 模版引擎 通过new Function + with 来实现","import { generate } from \"./generate\";\nimport { parserHTML } from \"./parser\";\n\n\nexport function compileToFunction(template) {\n  \n  let root = parserHTML(template)\n  //生成代码\n  let code = generate(root)\n  console.log(code, 'code')\n  let render = new Function(`with(this){return ${code}}`) //code中会用到数据,数据在vm上\n\n  return render\n\n  // render(){\n  //   return _c('div', {id: 'app'}, 'hello')\n  // }\n   \n  // 虚拟dom\n  // {tag: div, data:{id: 'app', a:1},children: [{text:'hello'}]}\n\n  // html => ast（只能描述语法 语法不存在的属性无法描述） => render函数 (with + new Function) => 虚拟dom (增加额外的属性) => 生成真实dom\n\n  \n}\n\n// with用法\n// let vm = {arr: 1}\n// with(vm) {\n//   console.log(arr) // 1\n// }","let id = 0\nclass Dep{//每个属性都分配一个dep，dep可以来存放watcher，watcher中还要存放dep\n  constructor() {\n    this.id = id++\n    this.subs = []//用来存放watcher\n  }\n  depend() {\n    // Dep.target dep里要存放watcher ， watcher要存放dep  多对多的关系\n    if(Dep.target) {\n      Dep.target.addDep(this)\n    }\n  }\n  addSub(watcher) {\n    this.subs.push(watcher)\n  }\n  notify() {\n    this.subs.forEach(watcher => watcher.update())\n  }\n}\nDep.target = null//所有组件公用\nlet stack = []\n\nexport function pushTarget(watcher) {\n  Dep.target = watcher\n  stack.push(watcher)\n}\n\nexport function popTarget() {\n  stack.pop()\n  Dep.target = stack[stack.length - 1]\n}\nexport default Dep","import { nextTick } from \"../util\"\n\n//用于watcher的调度工作\nlet queue = []\nlet has = {}//做列表 列表存放了哪些watcher\n\nfunction flushSchedulerQueue() {\n  for(let i = 0; i < queue.length; i++) {\n    queue[i].run()\n  }\n  queue = []\n  has = {}\n  pending = false\n}\n\nlet pending = false\n\n// 等待同步代码执行完后 才执行逻辑(event loop)\nexport function queueWatcher(watcher) {// 同步代码执行完毕后先清空微任务,再清空宏任务,想尽早更新页面\n  const id = watcher.id\n  if(has[id] == null) {\n    queue.push(watcher)\n    has[id] = true\n\n    // 开启一次更新操作 批处理（防抖）\n    if(!pending) {\n      // 定时器会开启新的线程\n      // setTimeout(flushSchedulerQueue, 0)\n      nextTick(flushSchedulerQueue)\n      pending = true\n    }\n  }\n}","import { popTarget, pushTarget } from \"./dep\"\nimport { queueWatcher } from \"./scheduler\"\n\nlet id = 0\nclass Watcher {\n   // vm, updateComponent, () => {回调}, true\n  constructor(vm, exprOrFn, cb, options) {\n    this.vm = vm\n    this.exprOrFn = exprOrFn// exprOrFn\n    this.user = !!options.user//是不是用户watcher\n    this.cb = cb\n    this.dirty = options.lazy // 如果是计算属性, 那麽默认值lazy: true, dirty: true\n    this.lazy = !!options.lazy\n    this.options = options\n    this.id = id++\n    this.deps = []\n    this.depsId = new Set()\n    if(typeof exprOrFn == 'string') {\n      this.getter = function() {//需要将表达式转成函数\n        //当数据取值时会进行依赖收集 age.n => vm['age]['n']\n        let path = exprOrFn.split('.') // [age, n]\n        let obj = vm\n        for(let i = 0; i < path.length; i++) {\n          obj = obj[path[i]]\n        }\n        return obj\n      }\n    } else {\n      // 默认应该执行exprOrFn， render(去vm上取值)\n      this.getter = exprOrFn\n    }\n    // 第一次的value\n    this.value = this.lazy? undefined: this.get() // 默认初始化要取值\n  }\n\n  get() { //用户更新时可以重新调用get\n    // 取值时会调defineProperty.get方法， 每个属性都可以收集自己的watcher，一个属性对应多个watcher，一个watcher可以对应多个属性\n    pushTarget(this)\n    const value = this.getter.call(this.vm)\n    popTarget()// Dep.target = null, 如果Dep.target有值说明这个变量在模板中使用了\n\n    return value\n  }\n  addDep(dep) {\n    let id = dep.id\n    if(!this.depsId.has(id)) {\n      this.depsId.add(id)\n      this.deps.push(dep)\n      dep.addSub(this)\n    }\n  }\n  update() { // vue中的更新操作是异步的\n    // this.get()\n    if (this.lazy) {\n      this.dirty = true\n    } else {\n      // 每次更新时 this=> watcher\n      queueWatcher(this) //多次调用update 先将watcher缓存下来,等一会一起更新\n    }\n    \n  }\n  run() {\n    let newValue = this.get()\n    let oldValue = this.value\n    this.value = newValue //为了保证下一次更新时 上一次的最新值时下一次的旧值\n    if (this.user) {\n      this.cb.call(this.vm, newValue, oldValue)\n    }\n  }\n  evaluate() {\n    this.dirty = false //false表示取过值了 \n    this.value =  this.get()//用户的getter执行\n  }\n  depend() {\n    let i = this.deps.length\n    while(i--) {\n      this.deps[i].depend()//name friends收集watcher\n    }\n  }\n }\n\n // watcher 和dep\n //将更新的功能封装成一个watcher\n // 渲染前会将当前watcher放在Dep类上\n // 在vue中页面渲染时使用的属性,需要进行依赖收集,收集对象的渲染watcher\n // 取值时,给每个属性都加dep属性,用于储存这个渲染watcher （同一个watcher会对应多个dep）\n // 每个属性可能对应多个视图（多个视图多个watcher） 一个属性要对应多个watcher\n // dep.depend（） => 通知dep存放watcher => Dep.target.addDep() => 通知watcher存放dep\n // 双向存储\n export default Watcher","\nexport function patch(oldVnode, vnode) {\n  console.log(oldVnode.nodeType, 'type')\n  console.log(vnode, 'vnode2')\n  if(oldVnode.nodeType === 1) {\n    console.log(oldVnode, 'oldVnode')\n    //用vnode生成真实dom，替换原本的dom元素\n    const parentElm = oldVnode.parentNode //找到它的父亲\n    let elm = createElm(vnode) // 根据虚拟节点 创建元素\n    parentElm.insertBefore(elm, oldVnode.nextSibling)\n    // 第一次渲染删除节点，下次再使用无法获取\n    parentElm.removeChild(oldVnode)\n    return elm\n  }\n}\n\nfunction createElm(vnode) {\n  let {tag, data, children, text, vm} = vnode\n  if(typeof tag === 'string') { // 元素\n    vnode.el = document.createElement(tag) //虚拟节点会有一个el属性,对应真实节点\n    children.forEach(child => {\n      vnode.el.appendChild(createElm(child))\n    })\n  } else {\n    vnode.el = document.createTextNode(text)\n  }\n  return vnode.el\n}","import Watcher from \"./observer/watcher\"\nimport { patch } from \"./vdom/patch\"\n\n\nexport function lifecycleMixin(Vue) {\n  Vue.prototype._update = function(vnode) {\n    // 既有初始化,又有更新\n    const vm = this\n    vm.$el = patch( vm.$el, vnode)\n\n  }\n  Vue.prototype.$nextTick = function () {\n    \n  }\n}\n// 后续每个组件渲染的时候都会有一个watcher\nexport function mountComponent(vm, el) {\n\n  // 更新函数 数据变化后 会再次调用此函数\n  let updateComponent = () => {\n    //调用render函数,生成虚拟dom\n    vm._update(vm._render()) // 后续更新可以调用updateComponent方法\n    // 用虚拟dom,生成真实dom\n  }\n  //观察者模式：属性是被观察者 观察者：刷新页面 \n  // updateComponent()\n  new Watcher(vm, updateComponent, () => {\n    // 回调\n  }, true)//true表示是一个渲染watcher 还有其他watcher\n\n}","let oldArrayPrototype = Array.prototype\n// 继承数组方法（保留原有数组功能）\nexport let arrayMethods = Object.create(oldArrayPrototype)\n// arrayMethods.__proto__ = Array.prototype \n\n//只有这7个可以改变原数组\nlet methods = [\n  'push',\n  'shift',\n  'unshift',\n  'pop',\n  'reverse',\n  'sort',\n  'splice'\n]\n\nmethods.forEach(method => {\n  // 用户调用的如果是以上七个方法,会用重写的,负责调用原来的数组方法\n  arrayMethods[method] = function (...args) {\n    // 此处this是数组\n    oldArrayPrototype[method].call(this, ...args)\n    let inserted\n    let ob = this.__ob__//根据当前数组获取observe实例\n    switch(method){\n      case 'push':\n      case 'unshift':\n        inserted = args // 就是新增的内容\n        break\n      case 'splice':\n        inserted = args.slice(2)\n        break\n      default: \n        break\n    }\n    // 如果有新增的内容要继续劫持 需要观测数组每一项,而不是数组\n    if(inserted) ob.observeArray(inserted)\n    // 数组的observer.dep属性\n    ob.dep.notify()\n    // arr.push({a:1}, {b:2})\n    // arr.splice(0, 1, xxxx)\n  }\n})\n\n// vue中的嵌套数据不能太深\n// vue中对象通过的是defineProperty实现的响应式,拦截了get和set,如果不存在的属性不会拦截，也不会响应。可以使用$set =>让对象自己去notify，或者赋一个新对象\n// vue中的数组改索引和长度,是不会影响更新的,通过变异方法更新视图，7个方法，数组中如果修改对象类型,修改对象也可以更新视图","import { isObject } from \"../util\";\nimport { arrayMethods } from \"./array\";\nimport Dep from './dep'\n\n// 1.如果数据是对象 会将对象不停的递归 进行劫持\n// 2.如果是数组, 会劫持数组的方法 并对数组中不是基本数据类型的进行检测\n\n//检测数据变化，类有类型,对象无类型\n\n// 如果给对象新增一个属性不会触发视图更新（给对象本身也增加一个dep，dep中存watcher，如果增加一个属性后，就手动触发watcher的更新）\nclass Observer{\n  constructor(data) {//对对象中的所有属性进行劫持\n\n    this.dep = new Dep()//数据可能是数组或者对象\n\n    Object.defineProperty(data, '__ob__', {\n      value: this,\n      enumerable: false //不可枚举\n    })\n    // data.__ob__ = this //所有被劫持过的属性都有__ob__\n    if(Array.isArray(data)) {\n      //数组劫持，对数组原来方法改写,切片编程\n      data.__proto__  = arrayMethods\n      //如果数组中的数据是对象类型,需要监控对象的变化\n      this.observeArray(data)\n    }else {\n      this.walk(data) //对象劫持\n    }\n  }\n\n  observeArray(data) { //对数组中的数组和数组中的对象再次劫持\n    //如果数组里放的是对象类型，也做了观测，JSON.stringify()也做了收集依赖\n    data.forEach(item => {\n      observe(item)\n    })\n  }\n\n  walk(data) {//传入的对象\n    Object.keys(data).forEach(key => {\n      defineReactive(data, key, data[key])\n    })\n  }\n}\nfunction dependArray(value) {\n  for(let i = 0; i < value.length; i++ ) {\n    let current = value[i]\n    current.__ob__ && current.__ob__.dep.depend()\n    if(Array.isArray(current)) {\n      dependArray(current)\n    }\n  }\n}\n\n//vue2会对对象进行遍历,将每个属性用defineProperty重新定义,所以导致性能差\nfunction defineReactive(data, key, value){//value有可能是对象\n  let childOb = observe (value)//本身用户默认值是对象套对象,需要递归处理（性能差）\n  let dep = new Dep()//每个属性都有一个dep属性\n  Object.defineProperty(data, key,{\n    get() {\n      //取值时将watcher将dep关联起来\n      if(Dep.target) {//此值是在模版中取值的\n        dep.depend()//让dep记住watcher\n        if(childOb) { //可能是数组，也可能是对象\n          childOb.dep.depend() //让数组和对象也记录watcher\n          if(Array.isArray(value)) {\n            dependArray(value)\n          }\n        }\n      }\n      return value\n    },\n    set(newV) {\n      // 更新视图\n      if (newV !== value) {\n        observe (newV)// 如果用户赋值一个新对象,需要将这个对象进行劫持\n        value = newV\n        dep.notify()//告诉当前的属性存放的watcher执行\n      }\n    }\n  })\n}\n\nexport function observe (data) {\n  //如果是对象类型才观测\n  if(!isObject(data)) {\n    return\n  }\n  //判断data有没有被观测\n  if(data.__ob__) {\n    return data.__ob__\n  }\n  return new Observer(data)\n}","import Dep from \"./observer/dep\"\nimport { observe } from \"./observer/index\"\nimport Watcher from \"./observer/watcher\"\nimport { isFunction } from \"./util\"\n\n\nexport function stateMixin(Vue) {\n  Vue.prototype.$watch = function (key, handler,options = {}) {\n    options.user = true //是一个用户写的watcher\n    let watcher = new Watcher(this, key, handler, options)\n\n    if(options.immediate) {\n      handler(watcher.value)\n    }\n  }\n}\n// 状态初始化\nexport function initState(vm) {\n  const opts = vm.$options\n  // if (opts.props) {\n  //   initProps()\n  // }\n  if (opts.data) {\n    initData(vm)\n  }\n  if (opts.computed) {\n    initComputed(vm, opts.computed)\n  }\n  if (opts.watch) {// 初始化watch\n    initWatch(vm, opts.watch)\n  }\n}\n\n// 代理\nfunction proxy(vm, source, key) {\n  Object.defineProperty(vm, key, {\n    get() {\n      return vm[source][key]\n    },\n    set(newVal) {\n      vm[source][key] = newVal\n    }\n  })\n}\n\nfunction initData(vm) {\n  let data = vm.$options.data // vm.$el vue内部会对属性检测如果以$开头 不会进行代理\n  // vue2会将data中的所有数据进行劫持 Object.defineProperty\n  //这个时候data和vm没有任何关系,通过_data进行关联\n  data = vm._data =isFunction(data)?data.call(vm): data\n\n  for(let key in data) { //取name时直接可以写vm.name vm.xxx => vm._data.xxx\n    proxy(vm, '_data', key)\n  }\n  \n  observe(data)\n}\n\nfunction initWatch(vm, watch) {\n  for(let key in watch) {\n    console.log(key, watch, 'watch')\n    let handler = watch[key]\n    if (Array.isArray(handler)) {\n      for(let i = 0; i < handler.length; i++) {\n        createWatcher(vm, key, handler[i])\n      }\n    } else {\n      createWatcher(vm, key, handler)\n    }\n  }\n}\n\nfunction createWatcher(vm, key, handler) {\n  return vm.$watch(key, handler)\n}\n\nfunction initComputed(vm, computed) {\n  const watchers = vm._computedWatchers = {}\n  for(let key in computed) {\n    const userDef = computed[key]\n\n    // 依赖的属性变化就重新赋值 get\n    let getter = typeof userDef == 'function'? userDef: userDef.get\n    // 每个计算属性本质就是watcher\n    //将watcher和属性做一个映射\n    watchers[key] = new Watcher(vm, getter, ()=>{}, {lazy: true})// 默认不执行\n    // 将key定义在vm上\n    defineComputed(vm, key, userDef)\n  }\n}\n\nfunction createComputedGetter (key) {\n  return function computedGetter() {// 取计算属性的值执行这个函数\n    //this._computedWatchers包含所有的计算属性\n    // 通过key可以拿到对应的watcher,这个watcher中包含了getter\n    let watcher = this._computedWatchers[key]\n    //脏需要调用用户getter\n    if(watcher.dirty) {//根据dirty属性判断是否重新求值\n      watcher.evaluate()\n    }\n\n    // 如果当前取完值后,Dep.target还有值需要继续向上收集\n    if(Dep.target) {\n      // 计算属性watcher内部有两个dep\n      watcher.depend()// watcher里对应了多个dep\n    }\n\n    return watcher.value\n  }\n}\n\nfunction defineComputed(vm, key, userDef) {\n  let sharedProperty = {}\n  if(typeof userDef == 'function') {\n    sharedProperty.get = userDef\n  } else {\n    sharedProperty.get = createComputedGetter(key)\n    sharedProperty.set = userDef.set\n  }\n  Object.defineProperty(vm, key, sharedProperty)\n}","import { compileToFunction } from \"./compiler/index\"\nimport { mountComponent } from \"./lifecycle\"\nimport { initState } from \"./state\"\n\nexport function initMixin(Vue) { //表示在vue的基础上做一次混合操作\n  Vue.prototype._init = function (options) {\n    const vm = this\n    vm.$options = options//后面会对options进行扩展\n\n    // 对数据进行初始化\n    initState(vm)//vm.$options.data 数据劫持\n\n    \n    if(vm.$options.el) {\n      // 将数据挂载到这个模板上\n      vm.$mount(vm.$options.el)\n    }\n  }\n\n  Vue.prototype.$mount = function (el) {\n    const vm = this\n    const options = vm.$options\n    el = document.querySelector(el)\n    vm.$el = el\n    console.log(el ,'el')\n\n    // 把模版转换成 对应的渲染函数 =》 虚拟dom vnode diff算法 更新虚拟dom => 真实dom\n\n    if(!options.render) { // 没有render用template\n      let template = options.template\n      if(!template && el) {// 没有template就取el的内容作为模板\n        template = el.outerHTML\n        let render = compileToFunction(template)\n        options.render = render\n      }\n    }\n    // options.render就是渲染函数\n    // 调用render方法 渲染成真实dom 替换掉页面的内容\n\n    mountComponent(vm, el) // 组件挂载过程\n  }\n\n}\n\n","export function createElement(vm, tag, data={}, ...children) {\n  return vnode(vm, tag, data, data.key, children, undefined)\n}\n\nexport function createTextElement(vm, text) {\n  return vnode(vm, undefined, undefined, undefined, undefined, text)\n}\n\nfunction vnode(vm, tag, data, key, children, text){\n\n  return {\n    vm,\n    tag,\n    data,\n    key,\n    children,\n    text\n  }\n\n}","import { createElement, createTextElement } from \"./vdom/index\"\n\nexport function renderMixin(Vue) {\n  Vue.prototype._c = function() {//createElement\n    return createElement(this,...arguments)\n  }\n  Vue.prototype._v = function(text) { //createTextElement\n    return createTextElement(this,text)\n  }\n  Vue.prototype._s = function(val) {// stringify\n    if(typeof val === 'object') return JSON.stringify(val)\n    return val\n  }\n\n  Vue.prototype._render = function() {\n    const vm = this\n    let render = vm.$options.render // 解析出来的render方法,同时也可能是用户写的\n\n    let vnode = render.call(vm)\n\n    return vnode\n  }\n}","//用class类写vue不好拆封,所以采用构造函数方式写\n\nimport { initGlobalApi } from './alobal-api/index'\nimport { initMixin } from './init'\nimport { lifecycleMixin } from './lifecycle'\nimport { renderMixin } from './render'\nimport { stateMixin } from './state'\n\nfunction Vue(options) {\n  // options用户传入选项\n  //构造函数中的this指向new的实例\n  this._init(options)// 初始化操作\n}\n// 扩展原型\ninitMixin(Vue)\nrenderMixin(Vue) // _render\nlifecycleMixin(Vue) // _update\nstateMixin(Vue)\n\n\n// 在类上扩展\ninitGlobalApi(Vue) //初始化全局api\n\nexport default Vue"],"names":["isFunction","val","isObject","callbacks","flushCallbacks","forEach","cb","waiting","timer","timerFn","Promise","resolve","then","MutationObserver","textNode","document","createTextNode","observe","characterData","textContent","setImmedidate","setTimeout","nextTick","push","lifecycleHooks","mergeHook","parentVal","childVal","concat","strats","hook","data","components","mergeOptions","parent","child","options","key","mergeField","hasOwnProperty","initGlobalApi","Vue","mixin","defaultTagRE","genProps","attrs","str","i","length","attr","name","styleObj","value","replace","arguments","JSON","stringify","slice","gen","el","type","generate","text","test","tokens","match","lastIndex","exec","index","trim","join","genChildren","children","map","c","code","tag","ncname","qnameCapture","startTagOpen","RegExp","startTagClose","endTag","attribute","createAstElement","tagName","root","stack","start","attributes","element","end","last","pop","Error","chars","parserHTML","html","advance","len","substring","parseStartTag","textEnd","indexOf","startTagMatch","endTagMatch","compileToFunction","template","console","log","render","Function","id","Dep","subs","target","addDep","watcher","update","pushTarget","popTarget","queue","has","flushSchedulerQueue","run","pending","queueWatcher","Watcher","vm","exprOrFn","user","dirty","lazy","deps","depsId","Set","getter","path","split","obj","undefined","get","call","dep","add","addSub","newValue","oldValue","depend","patch","oldVnode","vnode","nodeType","parentElm","parentNode","elm","createElm","insertBefore","nextSibling","removeChild","createElement","appendChild","lifecycleMixin","prototype","_update","$el","$nextTick","mountComponent","updateComponent","_render","oldArrayPrototype","Array","arrayMethods","Object","create","methods","method","args","inserted","ob","__ob__","observeArray","notify","Observer","defineProperty","enumerable","isArray","__proto__","walk","item","keys","defineReactive","dependArray","current","childOb","set","newV","stateMixin","$watch","handler","immediate","initState","opts","$options","initData","computed","initComputed","watch","initWatch","proxy","source","newVal","_data","createWatcher","watchers","_computedWatchers","userDef","defineComputed","createComputedGetter","computedGetter","evaluate","sharedProperty","initMixin","_init","$mount","querySelector","outerHTML","createTextElement","renderMixin","_c","_v","_s"],"mappings":"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"}